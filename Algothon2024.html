<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Parthak314 Website</title>

  <!--
    - favicon
  -->
  <link rel="shortcut icon" href="./assets/img/B1-Logo.png" type="image/x-icon">

  <!--
    - custom css link
  -->
  <link rel="stylesheet" href="./assets/css/style.css">

  <!--
    - google font link
  -->
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;500;600&display=swap" rel="stylesheet">

  <script type="module" src="https://md-block.verou.me/md-block.js"></script>

  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.28.0/themes/prism.min.css">
  <script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.28.0/prism.min.js"></script>
  <script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/MathJax/3.2.2/es5/tex-mml-chtml.min.js"></script>

  <style>
    body {
        font-family: Arial, sans-serif;
        line-height: 1.6;
        margin: 0;
        padding: 20px;
    }
    h1, h2, h3 {
        color: #eff5bf;
        margin-top: 30px;
    }
    h1 {
        text-align: center;
        font-size: 2.5rem;
    }
    pre {
        background-color: #e9ecef;
        padding: 10px;
        border-radius: 5px;
        overflow-x: auto;
    }
    code {
        font-family: "Courier New", Courier, monospace;
    }
    .highlight {
        background-color: #f8f9fa;
        border-left: 5px solid #343a40;
        padding: 10px;
    }
    ul {
        margin: 10px 0;
        padding-left: 20px;
    }
</style>
</head>

<body>

  <!--
    - #MAIN
  -->

  <main>

    <!--
      - #SIDEBAR
    -->
    <aside class="sidebar" data-sidebar>

      <div class="sidebar-info">

        <a href="/index.html">
          <figure class="avatar-box">
            <img src="./assets/img/GO1-Logo.png" style="border-radius: 30px; padding: 20px;">
          </figure>
        </a>

        <div class="info-content">
          <h1 class="name">Partha Khanna</h1>

          <p class="title">Student</p>
          <p style="padding: 2px;"> </p>
          <p class="title">Imperial College London</p>
        </div>

        <button class="info_more-btn" data-sidebar-btn>
          <span>Show Contacts</span>

          <ion-icon name="chevron-down"></ion-icon>
        </button>

      </div>

      <div class="sidebar-info_more">

        <div class="separator"></div>

        <ul class="contacts-list">

          <li class="contact-item">

            <div class="icon-box">
              <ion-icon name="mail-outline"></ion-icon>
            </div>

            <div class="contact-info">
              <p class="contact-title">Email</p>

              <a href="mailto:parthakhanna05@gmail.com" class="contact-link">parthakhanna05@gmail.com</a>
            </div>

          </li>

          <li class="contact-item">

            <div class="icon-box">
              <ion-icon name="phone-portrait-outline"></ion-icon>
            </div>

            <div class="contact-info">
              <p class="contact-title">Phone</p>

              <a href="tel:+447585950944" class="contact-link">+44 75859 50944</a>
            </div>

          </li>

          <li class="contact-item">

            <div class="icon-box">
              <ion-icon name="location-outline"></ion-icon>
            </div>

            <div class="contact-info">
              <p class="contact-title">Location</p>

              <address>London, UK</address>
            </div>

          </li>

        </ul>

        <div class="separator"></div>

        <ul class="social-list">

          <li class="social-item">
            <a href="https://github.com/parthak314" class="social-link">
              <ion-icon name="logo-github"></ion-icon>
            </a>
          </li>

          <li class="social-item">
            <a href="https://www.kaggle.com/parthakhanna" class="social-link">
              k
            </a>
          </li>

          <li class="social-item">
            <a href="https://www.linkedin.com/in/partha-khanna/" class="social-link">
              <ion-icon name="logo-linkedin"></ion-icon>
            </a>
          </li>

          <li class="social-item">
            <a href="https://www.instagram.com/parthk314/" class="social-link">
              <ion-icon name="logo-instagram"></ion-icon>
            </a>
          </li>

        </ul>

      </div>

    </aside>
    

    <!--
      - #main-content
    -->

    <div class="main-content">

      <!--
        - #ABOUT
      -->

      <article class="about  active" data-page="about">
        <header>
          <div style="width: 100%; height: 200px; overflow: hidden;">
            <img src="assets/img/Algothon2024.png" style="width: 100%; height: 100%; object-fit: cover; border-radius: 8px;">
          </div>
          <h2 class="h2 article-title" style="padding-top:20px">Algothon 2024</h2>
        </header>
        <div style="color: white">
          <p>We are given the username and password from a message on Slack, which unlocks a file on Google Drive containing data about stock performance. This data is used as input for an algorithm to buy and sell stocks at the right time to maximize returns. The output is submitted to a Google Form page. Slack messages are received every 19 minutes.</p>

<h2>Objectives</h2>
<ol>
    <li>Retrieve username and password from Slack</li>
    <li>Unlock file from Google Drive</li>
    <li>Process data through an algorithm to maximize returns
        <ul>
            <li>Design an algorithm to maximize returns</li>
        </ul>
    </li>
    <li>Submit output to a Google Form</li>
    <li>Automate the process every 19 minutes</li>
</ol>

<h2>1. File Name and Password Retrieval</h2>
<p>We use the <strong>Slack API</strong>. Messages containing the data start with <code>Data has just been released</code>. The process involves:</p>
<ul>
    <li>Returning the 10 most recent messages</li>
    <li>Sorting them by timestamp</li>
    <li>Selecting the most recent value</li>
</ul>
<p>We use a <code>try</code>-<code>except</code> block to handle errors gracefully. Additionally, we validate the message sender by their user ID (<code>U080GCRATP1</code>):</p>
<pre><code class="language-python">if response['messages']['matches']:
    for match in response['messages']['matches']:
        if match['user'] == 'U080GCRATP1':
            message = match
            file_name = message['text']
            print(f"Found a message with file reference: {file_name}")
            return file_name
else:
    print("No recent messages with the specified file keyword.")
</code></pre>

<p>We extract the file name and password by parsing the message string:</p>
<pre><code class="language-python">start_file = text.find("'") + 1
end_file = text.find("'", start_file)
file_name = text[start_file:end_file]</code></pre>

<h2>2. File Retrieval</h2>
<p>The file is located on Google Drive. Using the <strong>Google Drive API</strong>, we access the required file by specifying authentication details in a <code>google.json</code> configuration file. The file is downloaded as <code>stuff.crypt</code>.</p>

<h2>3. Algorithm to Process Data</h2>
<h3>1. Parameters Setup</h3>
<ul>
    <li><strong>short_term_period, long_term_period:</strong> Periods for moving averages</li>
    <li><strong>atr_period:</strong> Look-back period for ATR</li>
    <li><strong>volatility_impact:</strong> Scaling factor for volatility adjustments</li>
    <li><strong>max_weight:</strong> Maximum weight for normalized values</li>
    <li><strong>forecast_days:</strong> Number of days to predict</li>
</ul>

<h3>2. Calculating Moving Averages</h3>
<p>Using the formulas:</p>
<p>\[\text{Short-Term MA} = \frac{1}{n_s} \sum_{i=t-n_s+1}^t P_i\]</p>
<p>\[\text{Long-Term MA} = \frac{1}{n_l} \sum_{i=t-n_l+1}^t P_i\]</p>

<p>We calculate using the <code>rolling(window)</code> method and retrieve the latest value with <code>.iloc[-1]</code>.</p>

<h3>3. Calculating True Range (TR)</h3>
<p>True Range formula:</p>
<p>\[\text{TR} = \max(\text{High} - \text{Low}, |\text{High} - \text{Prev Close}|, |\text{Low} - \text{Prev Close}|)\]</p>

<h3>4. Calculating Volatility</h3>
<p>ATR and normalized ATR:</p>
<p>\[\text{ATR} = \frac{1}{n_a} \sum_{i=t-n_a+1}^t \text{TR}_i\]</p>
<p>\[\text{Normalized ATR} = \frac{\text{ATR}}{\text{Close}}\]</p>

<h3>5. Normalizing Values</h3>
<p>Strategy weights are normalized to ensure proportional distribution and risk management.</p>

<h2>4. Submission</h2>
<p>We use <strong>Selenium</strong> for automated browser interaction. The following function fills out and submits the form:</p>
<div class="side-by-side">
  <pre><code class="language-python">def fill_form(driver, wait, positions_data):
  checkbox = wait.until(EC.presence_of_element_located((By.CSS_SELECTOR, 'div[role="checkbox"]')))
  driver.execute_script("arguments[0].click();", checkbox)

  text_field = wait.until(EC.presence_of_element_located(
      (By.CSS_SELECTOR, 'textarea[aria-label="Your answer"]')))
  text_field.send_keys(json.dumps(positions_data, indent=2))

  submit_button = wait.until(EC.element_to_be_clickable((By.CSS_SELECTOR, 'div[role="button"][aria-label="Submit"]')))
  submit_button.click()
</code></pre>
<div style="text-align: center;">
  <img src="/assets/img/Algothon 2024 Submission Portal.png" alt="Submission Portal Image" width="500px" style="display: block; margin: 0 auto;">
</div>
</div>

<h2>5. Automation</h2>
<p>We automate the process to repeat every 19 minutes using the <code>schedule</code> library:</p>
<pre><code class="language-python">schedule.every(19).minutes.do(main)
print(f"Scheduled to run every 19 minutes.")</code></pre>

        </div>
      </article>
    </div>
  </main>






  <!--
    - custom js link
  -->
  <script src="./assets/js/script.js"></script>

  <!--
    - ionicon link
  -->
  <script type="module" src="https://unpkg.com/ionicons@5.5.2/dist/ionicons/ionicons.esm.js"></script>
  <script nomodule src="https://unpkg.com/ionicons@5.5.2/dist/ionicons/ionicons.js"></script>

</body>

</html>